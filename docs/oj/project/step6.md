## Step 6：评测日志与调试

---

### 模块目标

记录评测日志，支持Debug模式和结构化回放，便于调试和追踪。

---

### 前置知识要求

| 技术点         | 推荐学习内容           |
| -------------- | ---------------------- |
| 文件写入       | `with open(..., "w")` |
| JSONL 格式     | 每行一个JSON结构       |
| 错误处理与捕获 | `try/except` 捕捉异常  |
| 文件下载 API   | FastAPI/Flask 文件下载 |

---

### 任务拆解

#### 任务 1：评测日志结构化记录
- 目标：每次评测后将所有测试点结果写入日志文件。
- 要点：推荐 logs/job_{job_id}.log.jsonl，每行一条JSON。
- 建议：字段包括job_id、test_id、status、输入输出、stderr、时间等。

#### 任务 2：日志/回放/Debug接口
- 目标：支持用户/管理员查看评测日志、结构化回放和Debug模式。
- 要点：GET /jobs/{job_id}/log，GET /jobs/{job_id}/replay，debug=true时返回详细信息。
- 建议：日志文件不存在返回404，仅本人/管理员可查。

---

### 能力小结

| 能力项         | 说明                       |
| -------------- | -------------------------- |
| 日志记录       | 结构化记录所有评测细节     |
| Debug模式      | 支持详细调试信息输出       |
| 日志查询       | 支持用户/管理员权限查询     |
| 回放接口       | 支持结构化回放与可视化      |