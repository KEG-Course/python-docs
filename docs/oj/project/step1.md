## Step 1：配置解析与语言支持

---

### 模块目标

构建通用语言运行环境，支持多语言配置、自动识别和运行。

---

### 前置知识要求

| 技术点         | 推荐学习内容           |
| -------------- | ---------------------- |
| JSON 配置文件   | `json.load()`          |
| 字符串模板与替换 | `str.replace()`、`str.format()` |
| 子进程调用      | `subprocess.run()`、`Popen()` |
| 临时文件/目录管理 | `tempfile`, `os`, `shutil` |
| 文件扩展名提取   | `os.path.splitext()`   |
| REST API 基础   | FastAPI/Flask POST + 参数校验 |

---

### 任务拆解

#### 任务 1：配置文件加载与校验
- 目标：服务启动时加载并校验配置文件。
- 要点：必须传入 `--config path` 参数，缺失必要字段或路径非法则启动失败。
- 建议：配置内容存入全局变量或专用配置模块。

#### 任务 2：语言命令生成与自动识别
- 目标：根据配置生成编译/执行命令，自动识别用户提交语言。
- 要点：支持 `${source}`、`${exe}`、`${dir}` 占位符替换，优先用扩展名识别语言。
- 建议：无 `compile` 字段视为解释型语言，未找到语言抛出异常。

#### 任务 3：动态注册语言
- 目标：支持运行时动态注册新语言。
- 要点：不允许覆盖已有语言名，支持持久化到配置文件。
- 建议：字段结构需完整，注册后更新扩展名映射表。

---

### 能力小结

| 能力项         | 说明                       |
| -------------- | -------------------------- |
| 多语言配置     | 支持多种编译/解释型语言    |
| 自动识别       | 根据扩展名/shebang自动识别 |
| 命令生成       | 动态生成编译/执行命令      |
| 动态注册       | 支持运行时注册新语言       |
| 配置校验       | 启动时严格校验配置完整性   |