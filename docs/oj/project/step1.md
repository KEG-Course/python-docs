## Step 1：基础评测

---

### 模块目标

实现题目配置、基础评测流程，形成最基础的 OJ 评测闭环。

---

### 前置知识要求

| 技术点         | 推荐学习内容           |
| -------------- | ---------------------- |
| JSON 配置文件   | `json.load()`          |
| 子进程调用      | `subprocess.run()`、`Popen()` |
| REST API 基础   | FastAPI/Flask POST + 参数校验 |
| 异常处理        | `try/except`、HTTP 状态码 |

---

### 任务分解

#### 任务 1：题目配置文件加载与校验
- 目标：服务启动时加载并校验题目配置文件。
- 要点：必须传入 `--config path` 参数，缺失字段或路径非法则启动失败。
- 建议：配置内容存入全局变量或专用配置模块。

#### 任务 2：评测请求与响应
- 目标：实现评测接口，接收用户提交，返回评测结果。
- 要点：接口需校验参数，返回结构化 JSON，包含 status、score、time、memory、stderr 等。
- 建议：接口路径、参数、响应格式详见 [api.md](../api.md)。

#### 任务 3：异常处理与状态码
- 目标：对常见异常（如配置文件不存在、题目 id 未检索到、banned 用户提交等）返回合理 HTTP 状态码。
- 要点：如 400/404/403/429，响应体需包含错误信息。
- 建议：异常处理规范详见 [api.md](../api.md)。

---

### 能力小结

| 能力项         | 说明                       |
| -------------- | -------------------------- |
| 题目配置       | 支持多题目配置与校验       |
| 评测流程       | 实现最基础的评测闭环       |
| 请求与响应     | 结构化接口、参数校验       |
| 异常处理       | 合理返回 HTTP 状态码与信息 |

---

### 评分细则

| 功能/接口                | 分值 | 评分说明                         |
|--------------------------|------|----------------------------------|
| 题目配置文件加载与校验    | 2    | 配置完整性、异常处理              |
| 评测提交接口设计         | 3    | 路径、参数、响应、异常、权限      |
| 评测结果查询接口         | 2    | 路径、响应、异常、权限            |
| 异常处理与状态码         | 2    | 400/404/403/429 等覆盖            |
| 请求与响应结构规范       | 1    | code/msg/data 结构一致            |
| 文档与实现一致性         | 1    | 文档与实际实现同步                |
| **小计**                 | **11**|                                  |